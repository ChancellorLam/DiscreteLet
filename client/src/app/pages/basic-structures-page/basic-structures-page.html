<p-button 
  (click)="toggleAll()" 
  styleClass="p-button-text" 
  [label]="isExpanded ? 'Collapse All' : 'Expand All'">
</p-button>

<div class="card flex justify-content-center">
    <p-accordion [(value)]="activeTabs" multiple="true">
        
        <!-- Panel 1 -->
        <p-accordion-panel value="0">
            <p-accordion-header>Number Theory Introduction:</p-accordion-header>
            <p-accordion-content>
                <p class="m-0">
                    Number theory is a branch of pure mathematics that focuses on the integers and integer-valued functions. It investigates 
                    fundamental concepts such as divisibility (what it means for one integer to divide another), prime numbers and their 
                    distribution, greatest common divisors, and factorization into primes. Beyond these “elementary” concerns, number theory 
                    branches into deeper realms: analytic number theory uses tools from calculus and complex analysis to study patterns like 
                    the density of primes, while algebraic number theory examines the arithmetic properties of numbers in more general 
                    algebraic structures (like rings of algebraic integers). Many of its problems are easy to state but famously hard to 
                    solve (for example, the Goldbach conjecture or Fermat’s Last Theorem), and the field has unexpectedly rich applications 
                    in modern cryptography and computer science.
                </p>
            </p-accordion-content>
        </p-accordion-panel>

        <!-- Panel 2 -->
        <p-accordion-panel value="1">
            <p-accordion-header>1. Integers & Divisibility</p-accordion-header>
            <p-accordion-content>
                <p class="m-0">
                    Sets are a simple yet fundamental concept in discrete mathematics. A set is a collection of distinct objects, considered as an object in its own right. 
            Sets are typically denoted using curly braces, for example, the set of natural numbers can be represented as &#123;1, 2, 3, ....&#125;. 
            The objects within a set are called elements or members. Sets can be finite or infinite, and they can contain any type of object, including numbers, letters, or even other sets.
            <br /><br />
            Heres an example of a numerical set:
            <br /><br />
            A = &#123;1, 2, 3, 4, 5&#125;
            <br /><br />
            In this example, the set 'A' contains the elements 1, 2, 3, 4, and 5.
            <br /><br />
            Try it yourself using the concept that sets can be numbers, letters, or words:
            </p>
            <input 
                type="text" 
                pInputText 
                [(ngModel)]="value1" 
                (input)="checkSetInput('value1')"
                placeholder="Enter a valid set:"
                />

                <div *ngIf="isValid1 === null" style="margin-top: 10px;">
                    Please enter a set.
                </div>
                <div *ngIf="isValid1 === true" style="color: rgb(110, 241, 110); margin-top: 10px;">
                    Valid set!
                </div>

                <div *ngIf="isValid1 === false && value1.trim() !== ''" style="color: rgb(230, 80, 80); margin-top: 10px;">
                    Invalid set!
                </div>

                <div *ngIf="isValid1 && parsedSet1.length > 0" style="margin-top: 10px; color: rgb(191, 50, 230);">
                    <strong>Your set:</strong> &#123; {{ parsedSet1.join(', ') }} &#125;
                </div>
                <br />
            <p>
                Now that you understand sets, let's move onto set cardinality (the size of sets).
                <br /><br />
                The cardinality of a set is a measure of the "number of elements" in the set. For finite sets, the cardinality is simply the count of distinct elements within the set.
                <br /><br />
                For example, consider the set B = &#123;a, b, c, d&#125;. The cardinality of set B, denoted as |B|, is 4 because there are four distinct elements in the set.
                <br /><br />
                Enter any set to find its cardinality:
            </p>
            <input 
      type="text" 
      pInputText 
      [(ngModel)]="value2" 
      (input)="checkSetInput('value2')"
      placeholder="Enter a valid set:"
    />

    <div *ngIf="isValid2 === true" style="color: rgb(80, 217, 80); margin-top: 10px;">
      Valid set!
    </div>

    <div *ngIf="isValid2 === false && value2.trim() !== ''" style="color: rgb(230, 80, 80); margin-top: 10px;">
      Invalid set!
    </div>

    <div *ngIf="isValid2 && parsedSet2.length > 0" style="margin-top: 10px; color: rgb(50, 120, 230);">
      <strong>Your set:</strong> &#123; {{ parsedSet2.join(', ') }} &#125;
      <br />
      <strong>Cardinality:</strong> {{ parsedSet2.length }}
    </div>
                
            
            </p-accordion-content>
        </p-accordion-panel>

        <!-- Panel 3 -->
        <p-accordion-panel value="2">
            <p-accordion-header>2. GCD & LCM</p-accordion-header>
            <p-accordion-content>
                <p class="m-0">
                    The greatest common divisor (GCD) of two numbers is the largest integer that divides both, while the least common 
                    multiple (LCM) is the smallest positive integer that both numbers divide into evenly. One way to find these is through 
                    prime factorization, by comparing shared and unique factors. Another is the Euclidean Algorithm, which uses repeated 
                    division to efficiently determine the GCD. These concepts are essential for simplifying fractions, solving equations, 
                    and understanding number relationships.
                </p>
            </p-accordion-content>
        </p-accordion-panel>

              <!-- Panel 4: Matrices -->
              <p-accordion-panel value="4">
                <p-accordion-header>
                  <div class="topic-header header-font-size">III. Matrices</div>
                </p-accordion-header>
                <p-accordion-content>
                  <div class="indent-content">
                    <p class="m-0">
                      A matrix is a rectangular array of numbers arranged in rows and columns. Matrices are used to
                      represent and solve problems with relations and graphs in discrete mathematics.

                      <br/><br/>

                      A matrix with m rows and n columns is called an m × n matrix. The numbers in a matrix are called
                      entries or elements.

                      <br/><br/>

                      <strong>Example:</strong> Here is a 2 × 3 matrix:

                      <br/><br/>

                      A = [1 2 3]<br/>
                      &nbsp;&nbsp;&nbsp;&nbsp;[4 5 6]

                      <br/><br/>

                      This matrix has 2 rows and 3 columns.

                      <br/><br/>

                      <strong>Matrix Operations:</strong>

                      <br/><br/>

                      <strong>Matrix Addition:</strong> Two matrices can be added if they have the same dimensions. You
                      add
                      corresponding entries.

                      <br/><br/>

                      <strong>Example:</strong><br/>
                      [1 2] + [5 6] = [6 8]<br/>
                      [3 4]&nbsp;&nbsp;[7 8]&nbsp;&nbsp;[10 12]

                      <br/><br/>

                      <strong>Matrix Multiplication:</strong> To multiply two matrices, the number of columns in the
                      first
                      matrix must equal the number of rows in the second matrix.

                      <br/><br/>

                      <strong>Try it yourself:</strong> Enter two matrices to add them (format: "1,2;3,4" for a 2x2
                      matrix,
                      rows separated by semicolons):

                    </p>

                    <p style="margin-top: 15px;"><strong>Matrix A:</strong></p>
                    <input
                      type="text"
                      pInputText
                      [(ngModel)]="matrixAInput"
                      (input)="checkMatrixInput('A')"
                      placeholder="Enter matrix A (e.g., 1,2;3,4)"
                      style="width: 100%; max-width: 400px;"
                    />

                    <div *ngIf="isValidMatrixA === true" style="color: rgb(110, 241, 110); margin-top: 10px;">
                      Valid matrix A!
                    </div>

                    <div *ngIf="isValidMatrixA === false && matrixAInput.trim() !== ''"
                         style="color: rgb(230, 80, 80); margin-top: 10px;">
                      Invalid matrix A! Use format: "1,2;3,4" (rows separated by semicolons)
                    </div>

                    <div *ngIf="isValidMatrixA && matrixA.length > 0"
                         style="margin-top: 10px; color: rgb(50, 120, 230);">
                      <strong>Matrix A:</strong> {{ matrixA.length }} × {{ matrixA.length > 0 ? matrixA[0].length : 0 }}
                      matrix<br/>
                      <div *ngFor="let row of matrixA" style="margin-left: 20px;">
                        [ {{ row.join('  ') }} ]
                      </div>
                    </div>

                    <p style="margin-top: 15px;"><strong>Matrix B:</strong></p>
                    <input
                      type="text"
                      pInputText
                      [(ngModel)]="matrixBInput"
                      (input)="checkMatrixInput('B')"
                      placeholder="Enter matrix B (e.g., 5,6;7,8)"
                      style="width: 100%; max-width: 400px;"
                    />

                    <div *ngIf="isValidMatrixB === true" style="color: rgb(110, 241, 110); margin-top: 10px;">
                      Valid matrix B!
                    </div>

                    <div *ngIf="isValidMatrixB === false && matrixBInput.trim() !== ''"
                         style="color: rgb(230, 80, 80); margin-top: 10px;">
                      Invalid matrix B! Use format: "1,2;3,4" (rows separated by semicolons)
                    </div>

                    <div *ngIf="isValidMatrixB && matrixB.length > 0"
                         style="margin-top: 10px; color: rgb(50, 120, 230);">
                      <strong>Matrix B:</strong> {{ matrixB.length }} × {{ matrixB.length > 0 ? matrixB[0].length : 0 }}
                      matrix<br/>
                      <div *ngFor="let row of matrixB" style="margin-left: 20px;">
                        [ {{ row.join('  ') }} ]
                      </div>
                    </div>

                    <div *ngIf="isValidMatrixA" style="margin-top: 20px;">
                      <p style="margin-bottom: 10px;"><strong>Matrix A Operations:</strong></p>
                      <div style="display: flex; gap: 10px; align-items: center; flex-wrap: wrap;">
                        <input
                          type="number"
                          pInputText
                          [(ngModel)]="scalarValue"
                          placeholder="Enter scalar value"
                          style="width: 150px;"
                        />
                        <p-button
                          (click)="multiplyByScalar('A')"
                          label="Multiply A by Scalar"
                          styleClass="p-button-sm">
                        </p-button>
                        <p-button
                          (click)="transposeMatrix('A')"
                          label="Transpose A"
                          styleClass="p-button-sm">
                        </p-button>
                      </div>

                      <div *ngIf="scalarResult.length > 0" style="margin-top: 15px; color: rgb(80, 217, 80);">
                        <strong>Scalar Multiplication Result:</strong><br/>
                        <div *ngFor="let row of scalarResult" style="margin-left: 20px;">
                          [ {{ row.join('  ') }} ]
                        </div>
                      </div>

                      <div *ngIf="transposeResult.length > 0" style="margin-top: 15px; color: rgb(80, 217, 80);">
                        <strong>Transpose Result:</strong><br/>
                        <div *ngFor="let row of transposeResult" style="margin-left: 20px;">
                          [ {{ row.join('  ') }} ]
                        </div>
                      </div>
                    </div>

                    <div *ngIf="isValidMatrixA && isValidMatrixB" style="margin-top: 20px;">
                      <p style="margin-bottom: 10px;"><strong>Matrix Operations:</strong></p>
                      <div style="display: flex; gap: 5px;">
                        <p-button
                          (click)="addMatrices()"
                          label="Add (A + B)"
                          styleClass="p-button-sm">
                        </p-button>
                        <p-button
                          (click)="multiplyMatrices()"
                          label="Multiply (A × B)"
                          styleClass="p-button-sm">
                        </p-button>
                      </div>

                      <div *ngIf="matrixSum.length > 0" style="margin-top: 15px; color: rgb(80, 217, 80);">
                        <strong>Result (A + B):</strong><br/>
                        <div *ngFor="let row of matrixSum" style="margin-left: 20px;">
                          [ {{ row.join('  ') }} ]
                        </div>
                      </div>

                      <div *ngIf="matrixProduct.length > 0" style="margin-top: 15px; color: rgb(80, 217, 80);">
                        <strong>Result (A × B):</strong><br/>
                        <div *ngFor="let row of matrixProduct" style="margin-left: 20px;">
                          [ {{ row.join('  ') }} ]
                        </div>
                      </div>

                      <div *ngIf="matrixError" style="margin-top: 15px; color: rgb(230, 80, 80);">
                        {{ matrixError }}
                      </div>
                    </div>

                    <div style="margin-top: 20px;">
                      <p-button
                        (click)="loadMatrixExample()"
                        styleClass="p-button-sm p-button-text"
                        label="Load Example Matrices">
                      </p-button>
                    </div>
                  </div>
                </p-accordion-content>
              </p-accordion-panel>
            </p-tabpanel>

            <p-tabpanel value="1">
              <h3>Exercises</h3>
              <p>Practice gcd, modular inverses, sample problems.</p>
            </p-tabpanel>

            <p-tabpanel value="2">
              <h3>Relations Quiz</h3>
              <app-quiz>
              </app-quiz>
            </p-tabpanel>
          </p-tabpanels>
        </p-tabs>
      </div>

    </p-accordion>
  </div>
</div>
