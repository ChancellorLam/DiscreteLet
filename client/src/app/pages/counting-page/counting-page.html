<div class="card flex justify-content-center">
  <p-accordion [(value)]="activeTabs" multiple="true">

    <div class="card">
      <p-tabs [(value)]="activeTab">
        <p-tablist>
          <p-tab value="0">Lessons</p-tab>
          <p-tab value="1">Exercises</p-tab>
          <p-tab value="2">Quiz</p-tab>
        </p-tablist>

        <p-tabpanels>

          <!-- LESSONS TAB -->
          <p-tabpanel value="0">
            <h3>
              Counting Principles Lessons 
              <p-button (click)="toggleAll()" styleClass="p-button-text"
                [label]="isExpanded ? 'Collapse All' : 'Expand All'">
              </p-button>
            </h3>

            <!-- Panel 1 -->
            <p-accordion-panel value="0">
              <p-accordion-header class="accordionHeader"><u>1. Basic Counting Principle</u></p-accordion-header>
              <p-accordion-content>
                <p>
                  The basic counting principle states: if an event can occur in m ways, and another in n ways,
                  then both can occur in m × n ways.  
                  This forms the backbone of permutations and combinations.
                </p>
              </p-accordion-content>
            </p-accordion-panel>

            <!-- Panel 2 -->
            <p-accordion-panel value="1">
              <p-accordion-header class="accordionHeader"><u>2. Factorials</u></p-accordion-header>
              <p-accordion-content>
                <p>
                  Factorials count the number of ways to arrange n distinct objects.  
                  n! = n × (n−1) × ... × 1
                </p>

                <h3>Factorial Calculator</h3>
                <div class="button-row">
                  <p-inputnumber [(ngModel)]="factorialInput" inputId="factorialinput"></p-inputnumber>
                  <p-button (click)="onFactorialCalculate()" styleClass="p-button-text" label="Compute"></p-button>
                </div>

                <div class="interactiveToolText">
                  Result: {{ factorialResult }}
                </div>
              </p-accordion-content>
            </p-accordion-panel>

            <!-- Panel 3 -->
            <p-accordion-panel value="2">
              <p-accordion-header class="accordionHeader"><u>3. Permutations</u></p-accordion-header>
              <p-accordion-content>
                <p>
                  Permutations count the ways to arrange r objects chosen from n in order.  
                  P(n,r) = n! / (n−r)!
                </p>

                <h3>Permutation Calculator</h3>

                <div class="button-row">
                  <p-inputnumber [(ngModel)]="permN" placeholder="n"></p-inputnumber>
                  <p-inputnumber [(ngModel)]="permR" placeholder="r"></p-inputnumber>
                  <p-button (click)="onPermutationCalculate()" styleClass="p-button-text" label="Compute"></p-button>
                </div>

                <div class="interactiveToolText">
                  Result: {{ permResult }}
                </div>
              </p-accordion-content>
            </p-accordion-panel>

            <!-- Panel 4 -->
            <p-accordion-panel value="3">
              <p-accordion-header class="accordionHeader"><u>4. Combinations</u></p-accordion-header>
              <p-accordion-content>
                <p>
                  Combinations count the number of ways to choose r items from n without regard to order.  
                  C(n,r) = n! / (r! (n−r)!)
                </p>

                <h3>Combination Calculator</h3>

                <div class="button-row">
                  <p-inputnumber [(ngModel)]="combN" placeholder="n"></p-inputnumber>
                  <p-inputnumber [(ngModel)]="combR" placeholder="r"></p-inputnumber>
                  <p-button (click)="onCombinationCalculate()" styleClass="p-button-text" label="Compute"></p-button>
                </div>

                <div class="interactiveToolText">
                  Result: {{ combResult }}
                </div>
              </p-accordion-content>
            </p-accordion-panel>

            <!-- Panel 5 -->
            <p-accordion-panel value="4">
              <p-accordion-header class="accordionHeader"><u>5. Subsets & Power Sets</u></p-accordion-header>
              <p-accordion-content>
                <p>
                  A set with n elements has 2ⁿ subsets.  
                  This includes the empty set and the full set.
                </p>
              </p-accordion-content>
            </p-accordion-panel>

          </p-tabpanel>

          <!-- EXERCISES TAB -->
          <p-tabpanel value="1">
            <h3>Exercises</h3>
            <p>Practice factorials, permutations, combinations, and subset counting.</p>
          </p-tabpanel>

          <!-- QUIZ TAB -->
          <p-tabpanel value="2">
            <h3>Counting Quiz</h3>
            <app-quiz [questions]="countingQuestions"></app-quiz>
          </p-tabpanel>

        </p-tabpanels>
      </p-tabs>
    </div>

  </p-accordion>
</div>
